/*
   SoundManager 2: Javascript Sound for the Web
   --------------------------------------------
   http://schillmania.com/projects/soundmanager2/

   Copyright (c) 2008, Scott Schiller. All rights reserved.
   Code licensed under the BSD License:
   http://schillmania.com/projects/soundmanager2/license.txt

   V2.90a.20081028
*/
function SoundManager(B,A){this.flashVersion=8;this.debugMode=true;this.useConsole=true;this.consoleOnly=false;this.waitForWindowLoad=false;this.nullURL="null.mp3";this.allowPolling=true;this.useMovieStar=false;this.useHighPerformance=true;this.bgColor="#ffffff";this.defaultOptions={autoLoad:false,stream:true,autoPlay:false,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onstop:null,onfinish:null,onbeforefinish:null,onbeforefinishtime:5000,onbeforefinishcomplete:null,onjustbeforefinish:null,onjustbeforefinishtime:200,multiShot:true,position:null,pan:0,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false};this.movieStarOptions={onmetadata:null,useVideo:false};this.flashBlockHelper={enabled:false,message:[]};var E=this;this.version=null;this.versionNumber="V2.90a.20081028";this.movieURL=null;this.url=null;this.altURL=null;this.swfLoaded=false;this.enabled=false;this.o=null;this.id=(A||"sm2movie");this.oMC=null;this.sounds=[];this.soundIDs=[];this.muted=false;this.isIE=(navigator.userAgent.match(/MSIE/i));this.isSafari=(navigator.userAgent.match(/safari/i));this.isGecko=(navigator.userAgent.match(/gecko/i));this.debugID="soundmanager-debug";this._debugOpen=true;this._didAppend=false;this._appendSuccess=false;this._didInit=false;this._disabled=false;this._windowLoaded=false;this._hasConsole=(typeof console!="undefined"&&typeof console.log!="undefined");this._debugLevels=["log","info","warn","error"];this._defaultFlashVersion=8;this.filePatterns={flash8:/\.(mp3)/i,flash9:/\.(mp3)/i};this.netStreamTypes=["aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"];this.netStreamPattern=new RegExp(".("+this.netStreamTypes.join("|")+")","i");this.filePattern=null;this.features={peakData:false,waveformData:false,eqData:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local + internet access)"},description:null,noRemote:null,noLocal:null};this._setVersionInfo=function(){if(E.flashVersion!=8&&E.flashVersion!=9){alert('soundManager.flashVersion must be 8 or 9. "'+E.flashVersion+'" is invalid. Reverting to '+E._defaultFlashVersion+".");E.flashVersion=E._defaultFlashVersion}E.version=E.versionNumber+(E.flashVersion==9?" (AS3/Flash 9)":" (AS2/Flash 8)");if(E.flashVersion>8){E.defaultOptions=E._mergeObjects(E.defaultOptions,E.flash9Options)}if(E.flashVersion>8&&E.useMovieStar){E.defaultOptions=E._mergeObjects(E.defaultOptions,E.movieStarOptions);E.filePatterns.flash9=new RegExp(".(mp3|"+E.netStreamTypes.join("|")+")","i")}else{E.useMovieStar=false}E.filePattern=E.filePatterns[(E.flashVersion!=8?"flash9":"flash8")];E.movieURL=(E.flashVersion==8?"soundmanager2.swf":"soundmanager2_flash9.swf");E.features.peakData=E.features.waveformData=E.features.eqData=(E.flashVersion==9)};this._overHTTP=(document.location?document.location.protocol.match(/http/i):null);this._waitingforEI=false;this._initPending=false;this._tryInitOnFocus=(this.isSafari&&typeof document.hasFocus=="undefined");this._isFocused=(typeof document.hasFocus!="undefined"?document.hasFocus():null);this._okToDisable=!this._tryInitOnFocus;this.useAltURL=!this._overHTTP;var C="http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html";this.supported=function(){return(E._didInit&&!E._disabled)};this.getMovie=function(F){return E.isIE?window[F]:(E.isSafari?document.getElementById(F)||document[F]:document.getElementById(F))};this.loadFromXML=function(F){try{E.o._loadFromXML(F)}catch(G){E._failSafely();return true}};this.createSound=function(G){if(!E._didInit){throw new Error("soundManager.createSound(): Not loaded yet - wait for soundManager.onload() before calling sound-related methods")}if(arguments.length==2){var G={id:arguments[0],url:arguments[1]}}var H=E._mergeObjects(G);var F=H;if(E._idCheck(F.id,true)){return E.sounds[F.id]}if(E.flashVersion>8&&E.useMovieStar){if(F.isMovieStar==null){F.isMovieStar=(F.url.match(E.netStreamPattern)?true:false)}if(F.isMovieStar){}if(F.isMovieStar&&(F.usePeakData||F.useWaveformData||F.useEQData)){F.usePeakData=false;F.useWaveformData=false;F.useEQData=false}}E.sounds[F.id]=new D(F);E.soundIDs[E.soundIDs.length]=F.id;if(E.flashVersion==8){E.o._createSound(F.id,F.onjustbeforefinishtime)}else{E.o._createSound(F.id,F.url,F.onjustbeforefinishtime,F.usePeakData,F.useWaveformData,F.useEQData,F.isMovieStar,(F.isMovieStar?F.useVideo:false))}if(F.autoLoad||F.autoPlay){window.setTimeout(function(){if(E.sounds[F.id]){E.sounds[F.id].load(F)}},20)}if(F.autoPlay){if(E.flashVersion==8){E.sounds[F.id].playState=1}else{E.sounds[F.id].play()}}return E.sounds[F.id]};this.createVideo=function(F){if(arguments.length==2){var F={id:arguments[0],url:arguments[1]}}if(E.flashVersion>=9){F.isMovieStar=true;F.useVideo=true}else{return false}if(E.useMovieStar){}return E.createSound(F)};this.destroySound=function(G,F){if(!E._idCheck(G)){return false}for(var H=0;H<E.soundIDs.length;H++){if(E.soundIDs[H]==G){E.soundIDs.splice(H,1);continue}}E.sounds[G].unload();if(!F){E.sounds[G].destruct()}delete E.sounds[G]};this.destroyVideo=this.destroySound;this.load=function(F,G){if(!E._idCheck(F)){return false}E.sounds[F].load(G)};this.unload=function(F){if(!E._idCheck(F)){return false}E.sounds[F].unload()};this.play=function(F,G){if(!E._idCheck(F)){if(typeof G!="Object"){G={url:G}}if(G&&G.url){G.id=F;E.createSound(G)}else{return false}}E.sounds[F].play(G)};this.start=this.play;this.setPosition=function(F,G){if(!E._idCheck(F)){return false}G=Math.min((G||0),E.duration);E.sounds[F].setPosition(G)};this.stop=function(F){if(!E._idCheck(F)){return false}E.sounds[F].stop()};this.stopAll=function(){for(var F in E.sounds){if(E.sounds[F] instanceof D){E.sounds[F].stop()}}};this.pause=function(F){if(!E._idCheck(F)){return false}E.sounds[F].pause()};this.pauseAll=function(){for(var F=E.soundIDs.length;F--;){E.sounds[E.soundIDs[F]].pause()}};this.resume=function(F){if(!E._idCheck(F)){return false}E.sounds[F].resume()};this.resumeAll=function(){for(var F=E.soundIDs.length;F--;){E.sounds[E.soundIDs[F]].resume()}};this.togglePause=function(F){if(!E._idCheck(F)){return false}E.sounds[F].togglePause()};this.setPan=function(F,G){if(!E._idCheck(F)){return false}E.sounds[F].setPan(G)};this.setVolume=function(G,F){if(!E._idCheck(G)){return false}E.sounds[G].setVolume(F)};this.mute=function(F){if(typeof F!="string"){F=null}if(!F){var H=null;for(var G=E.soundIDs.length;G--;){E.sounds[E.soundIDs[G]].mute()}E.muted=true}else{if(!E._idCheck(F)){return false}E.sounds[F].mute()}};this.muteAll=function(){E.mute()};this.unmute=function(F){if(typeof F!="string"){F=null}if(!F){var H=null;for(var G=E.soundIDs.length;G--;){E.sounds[E.soundIDs[G]].unmute()}E.muted=false}else{if(!E._idCheck(F)){return false}E.sounds[F].unmute()}};this.unmuteAll=function(){E.unmute()};this.setPolling=function(F){if(!E.o||!E.allowPolling){return false}E.o._setPolling(F)};this.disable=function(F){if(E._disabled){return false}E._disabled=true;for(var G=E.soundIDs.length;G--;){E._disableObject(E.sounds[E.soundIDs[G]])}E.initComplete();E._disableObject(E)};this.handleFlashBlock=function(F){return false};this.canPlayURL=function(F){return(F?(F.match(E.filePattern)?true:false):null)};this.getSoundById=function(G,H){if(!G){throw new Error("SoundManager.getSoundById(): sID is null/undefined")}var F=E.sounds[G];if(!F&&!H){}return F};this.onload=function(){soundManager._wD("<em>Warning</em>: soundManager.onload() is undefined.",2)};this.onerror=function(){};this._idCheck=this.getSoundById;this._disableObject=function(G){for(var F in G){if(typeof G[F]=="function"&&typeof G[F]._protected=="undefined"){G[F]=function(){return false}}}F=null};this._failSafely=function(){var H="You may need to whitelist this location/domain eg. file:///C:/ or C:/ or mysite.com, or set ALWAYS ALLOW under the Flash Player Global Security Settings page. The latter is probably less-secure.";var G='<a href="'+C+'" title="'+H+'">view/edit</a>';var F='<a href="'+C+'" title="Flash Player Global Security Settings">FPGSS</a>';if(!E._disabled){E.disable()}};this._normalizeMovieURL=function(F){if(F){if(F.match(/\.swf/)){F=F.substr(0,F.lastIndexOf(".swf"))}if(F.lastIndexOf("/")!=F.length-1){F=F+"/"}}return(F&&F.lastIndexOf("/")!=-1?F.substr(0,F.lastIndexOf("/")+1):"./")+E.movieURL};this._getDocument=function(){return(document.body?document.body:(document.documentElement?document.documentElement:document.getElementsByTagName("div")[0]))};this._getDocument._protected=true;this._createMovie=function(I,H){if(E._didAppend&&E._appendSuccess){return false}E._didAppend=true;E._setVersionInfo();var M=(H?H:E.url);var G=(E.altURL?E.altURL:M);E.url=E._normalizeMovieURL(E._overHTTP?M:G);H=E.url;var P='<embed name="'+I+'" id="'+I+'" src="'+H+'" width="100%" height="100%" quality="high" allowScriptAccess="always" quality="high" '+(E.useHighPerformance&&!E.useMovieStar?'wmode="transparent" ':"")+'bgcolor="'+E.bgColor+'" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash"></embed>';var L='<object id="'+I+'" data="'+H+'" type="application/x-shockwave-flash" width="100%" height="100%"><param name="movie" value="'+H+'" /><param name="AllowScriptAccess" value="always" /><param name="quality" value="high" />'+(E.useHighPerformance&&!E.useMovieStar?'<param name="wmode" value="transparent" /> ':"")+'<param name="bgcolor" value="'+E.bgColor+'" /><!-- --></object>';var K=(!E.isIE?P:L);var J="soundManager._createMovie(): appendChild/innerHTML set failed. May be app/xhtml+xml DOM-related.";var F=E._getDocument();if(F){E.oMC=document.getElementById("sm2-container")?document.getElementById("sm2-container"):document.createElement("div");if(!E.oMC.id){E.oMC.id="sm2-container";E.oMC.className="movieContainer";var Q=null;if(E.useHighPerformance){Q={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",zIndex:-1}}else{Q={position:"absolute",width:"1px",height:"1px",bottom:"0px",left:"0px"}}var O=null;for(O in Q){E.oMC.style[O]=Q[O]}try{F.appendChild(E.oMC);E.oMC.innerHTML=K;E._appendSuccess=true}catch(N){throw new Error(J)}}else{E.oMC.innerHTML=K;E._appendSuccess=true}}};this._writeDebug=function(F,H,G){};this._writeDebug._protected=true;this._wD=this._writeDebug;this._wDAlert=function(F){alert(F)};if(window.location.href.indexOf("debug=alert")+1&&E.debugMode){}this._toggleDebug=function(){};this._toggleDebug._protected=true;this._debug=function(){for(var G=0,F=E.soundIDs.length;G<F;G++){E.sounds[E.soundIDs[G]]._debug()}};this._mergeObjects=function(G,F){var J={};for(var H in G){J[H]=G[H]}var I=(typeof F=="undefined"?E.defaultOptions:F);for(var K in I){if(typeof J[K]=="undefined"){J[K]=I[K]}}return J};this.createMovie=function(F){if(F){E.url=F}E._initMovie()};this.go=this.createMovie;this._initMovie=function(){if(E.o){return false}E.o=E.getMovie(E.id);if(!E.o){E._createMovie(E.id,E.url);E.o=E.getMovie(E.id)}if(E.o){}};this.waitForExternalInterface=function(){if(E._waitingForEI){return false}E._waitingForEI=true;if(E._tryInitOnFocus&&!E._isFocused){return false}if(!E._didInit){}setTimeout(function(){if(!E._didInit){if(!E._overHTTP){}}if(!E._didInit&&E._okToDisable){E._failSafely()}},750)};this.handleFocus=function(){if(E._isFocused||!E._tryInitOnFocus){return true}E._okToDisable=true;E._isFocused=true;if(E._tryInitOnFocus){window.removeEventListener("mousemove",E.handleFocus,false)}E._waitingForEI=false;setTimeout(E.waitForExternalInterface,500);if(window.removeEventListener){window.removeEventListener("focus",E.handleFocus,false)}else{if(window.detachEvent){window.detachEvent("onfocus",E.handleFocus)}}};this.initComplete=function(){if(E._didInit){return false}E._didInit=true;if(E._disabled){E.onerror.apply(window);return false}if(E.waitForWindowLoad&&!E._windowLoaded){if(window.addEventListener){window.addEventListener("load",E.initUserOnload,false)}else{if(window.attachEvent){window.attachEvent("onload",E.initUserOnload)}}return false}else{if(E.waitForWindowLoad&&E._windowLoaded){}E.initUserOnload()}};this.initUserOnload=function(){try{E.onload.apply(window)}catch(F){setTimeout(function(){throw new Error(F)},20);return false}};this.init=function(){E._initMovie();if(E._didInit){return false}if(window.removeEventListener){window.removeEventListener("load",E.beginDelayedInit,false)}else{if(window.detachEvent){window.detachEvent("onload",E.beginDelayedInit)}}try{E.o._externalInterfaceTest(false);if(!E.allowPolling){}E.setPolling(true);if(!E.debugMode){E.o._disableDebug()}E.enabled=true}catch(F){E._failSafely();E.initComplete();return false}E.initComplete()};this.beginDelayedInit=function(){E._windowLoaded=true;setTimeout(E.waitForExternalInterface,500);setTimeout(E.beginInit,20)};this.beginInit=function(){if(E._initPending){return false}E.createMovie();E._initMovie();E._initPending=true;return true};this.domContentLoaded=function(){if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",E.domContentLoaded,false)}E.go()};this._externalInterfaceOK=function(){if(E.swfLoaded){return false}E.swfLoaded=true;E._tryInitOnFocus=false;if(E.isIE){setTimeout(E.init,100)}else{E.init()}};this._setSandboxType=function(F){var G=E.sandbox;G.type=F;G.description=G.types[(typeof G.types[F]!="undefined"?F:"unknown")];if(G.type=="localWithFile"){G.noRemote=true;G.noLocal=false}else{if(G.type=="localWithNetwork"){G.noRemote=false;G.noLocal=true}else{if(G.type=="localTrusted"){G.noRemote=false;G.noLocal=false}}}};this.destruct=function(){E.disable(true)};function D(F){var G=this;this.sID=F.id;this.url=F.url;this.options=E._mergeObjects(F);this.instanceOptions=this.options;this._iO=this.instanceOptions;this._debug=function(){};this._debug();this.id3={};this.resetProperties=function(H){G.bytesLoaded=null;G.bytesTotal=null;G.position=null;G.duration=null;G.durationEstimate=null;G.loaded=false;G.playState=0;G.paused=false;G.readyState=0;G.muted=false;G.didBeforeFinish=false;G.didJustBeforeFinish=false;G.instanceOptions={};G.instanceCount=0;G.peakData={left:0,right:0};G.waveformData=[];G.eqData=[]};G.resetProperties();this.load=function(H){if(typeof H!="undefined"){G._iO=E._mergeObjects(H);G.instanceOptions=G._iO}else{var H=G.options;G._iO=H;G.instanceOptions=G._iO}if(typeof G._iO.url=="undefined"){G._iO.url=G.url}if(G._iO.url==G.url&&G.readyState!=0&&G.readyState!=2){return false}G.loaded=false;G.readyState=1;G.playState=(H.autoPlay?1:0);try{if(E.flashVersion==8){E.o._load(G.sID,G._iO.url,G._iO.stream,G._iO.autoPlay,(G._iO.whileloading?1:0))}else{E.o._load(G.sID,G._iO.url,G._iO.stream?true:false,G._iO.autoPlay?true:false);if(G._iO.isMovieStar&&G._iO.autoLoad&&!G._iO.autoPlay){G.pause()}}}catch(I){E.onerror();E.disable()}};this.unload=function(){if(G.readyState!=0){if(G.readyState!=2){G.setPosition(0)}E.o._unload(G.sID,E.nullURL);G.resetProperties()}};this.destruct=function(){E.o._destroySound(G.sID);E.destroySound(G.sID,true)};this.play=function(I){if(!I){I={}}G._iO=E._mergeObjects(I,G._iO);G._iO=E._mergeObjects(G._iO,G.options);G.instanceOptions=G._iO;if(G.playState==1){var H=G._iO.multiShot;if(!H){return false}else{}}if(!G.loaded){if(G.readyState==0){G._iO.stream=true;G._iO.autoPlay=true;G.load(G._iO)}else{if(G.readyState==2){return false}else{}}}else{}if(G.paused){G.resume()}else{G.playState=1;if(!G.instanceCount||E.flashVersion==9){G.instanceCount++}G.position=(typeof G._iO.position!="undefined"&&!isNaN(G._iO.position)?G._iO.position:0);if(G._iO.onplay){G._iO.onplay.apply(G)}G.setVolume(G._iO.volume);G.setPan(G._iO.pan);E.o._start(G.sID,G._iO.loop||1,(E.flashVersion==9?G.position:G.position/1000))}};this.start=this.play;this.stop=function(H){if(G.playState==1){G.playState=0;G.paused=false;if(G._iO.onstop){G._iO.onstop.apply(G)}E.o._stop(G.sID,H);G.instanceCount=0;G._iO={}}};this.setPosition=function(H){G._iO.position=H;E.o._setPosition(G.sID,(E.flashVersion==9?G._iO.position:G._iO.position/1000),(G.paused||!G.playState))};this.pause=function(){if(G.paused||G.playState==0){return false}G.paused=true;E.o._pause(G.sID);if(G._iO.onpause){G._iO.onpause.apply(G)}};this.resume=function(){if(!G.paused||G.playState==0){return false}G.paused=false;E.o._pause(G.sID);if(G._iO.onresume){G._iO.onresume.apply(G)}};this.togglePause=function(){if(!G.playState){G.play({position:(E.flashVersion==9?G.position:G.position/1000)});return false}if(G.paused){G.resume()}else{G.pause()}};this.setPan=function(H){if(typeof H=="undefined"){H=0}E.o._setPan(G.sID,H);G._iO.pan=H};this.setVolume=function(H){if(typeof H=="undefined"){H=100}E.o._setVolume(G.sID,(E.muted&&!G.muted)||G.muted?0:H);G._iO.volume=H};this.mute=function(){G.muted=true;E.o._setVolume(G.sID,0)};this.unmute=function(){G.muted=false;E.o._setVolume(G.sID,typeof G._iO.volume!="undefined"?G._iO.volume:G.options.volume)};this._whileloading=function(H,I,J){if(!G._iO.isMovieStar){G.bytesLoaded=H;G.bytesTotal=I;G.duration=Math.floor(J);G.durationEstimate=parseInt((G.bytesTotal/G.bytesLoaded)*G.duration);if(G.readyState!=3&&G._iO.whileloading){G._iO.whileloading.apply(G)}}else{G.bytesLoaded=H;G.bytesTotal=I;G.duration=Math.floor(J);G.durationEstimate=G.duration;if(G.readyState!=3&&G._iO.whileloading){G._iO.whileloading.apply(G)}}};this._onid3=function(K,H){var L=[];for(var J=0,I=K.length;J<I;J++){L[K[J]]=H[J]}G.id3=E._mergeObjects(G.id3,L);if(G._iO.onid3){G._iO.onid3.apply(G)}};this._whileplaying=function(I,J,H,K){if(isNaN(I)||I==null){return false}G.position=I;if(G._iO.usePeakData&&typeof J!="undefined"&&J){G.peakData={left:J.leftPeak,right:J.rightPeak}}if(G._iO.useWaveformData&&typeof H!="undefined"&&H){G.waveformData=H}if(G._iO.useEQData&&typeof K!="undefined"&&K){G.eqData=K}if(G.playState==1){if(G._iO.whileplaying){G._iO.whileplaying.apply(G)}if(G.loaded&&G._iO.onbeforefinish&&G._iO.onbeforefinishtime&&!G.didBeforeFinish&&G.duration-G.position<=G._iO.onbeforefinishtime){G._onbeforefinish()}}};this._onload=function(H){H=(H==1?true:false);if(!H){if(E.sandbox.noRemote==true){}if(E.sandbox.noLocal==true){}}G.loaded=H;G.readyState=H?3:2;if(G._iO.onload){G._iO.onload.apply(G)}};this._onbeforefinish=function(){if(!G.didBeforeFinish){G.didBeforeFinish=true;if(G._iO.onbeforefinish){G._iO.onbeforefinish.apply(G)}}};this._onjustbeforefinish=function(H){if(!G.didJustBeforeFinish){G.didJustBeforeFinish=true;if(G._iO.onjustbeforefinish){G._iO.onjustbeforefinish.apply(G)}}};this._onfinish=function(){G.playState=0;G.paused=false;if(G._iO.onfinish){G._iO.onfinish.apply(G)}if(G._iO.onbeforefinishcomplete){G._iO.onbeforefinishcomplete.apply(G)}G.setPosition(0);G.didBeforeFinish=false;G.didJustBeforeFinish=false;if(G.instanceCount){G.instanceCount--;if(!G.instanceCount){G.instanceCount=0;G.instanceOptions={}}}};this._onmetadata=function(H){if(!H.width&&!H.height){H.width=320;H.height=240}G.metadata=H;G.width=H.width;G.height=H.height;if(G._iO.onmetadata){G._iO.onmetadata.apply(G)}E.wD("SMSound.onmetadata() complete")}}if(window.addEventListener){window.addEventListener("focus",E.handleFocus,false);window.addEventListener("load",E.beginDelayedInit,false);window.addEventListener("unload",E.destruct,false);if(E._tryInitOnFocus){window.addEventListener("mousemove",E.handleFocus,false)}}else{if(window.attachEvent){window.attachEvent("onfocus",E.handleFocus);window.attachEvent("onload",E.beginDelayedInit);window.attachEvent("unload",E.destruct)}else{soundManager.onerror();soundManager.disable()}}if(document.addEventListener){document.addEventListener("DOMContentLoaded",E.domContentLoaded,false)}}var soundManager=new SoundManager();